--PROGRAME_5 OF LAB MANUALE UNIT_3.

DECLARE
	I number(3);
	VENO EMP1.EID%TYPE;
	VENAME EMP1.ENAME%TYPE;
	VSAL EMP1.SAL%TYPE;
	VENO EMP1.DEPTNO%TYPE;
	
	CURSOR CUR_EMP IS SELECT EID,ENAME,SAL FROM EMP1 WHERE DEPTNO=&DEPTNO;
	NO_DEPT_FOUND EXCEPTION;
	
BEGIN 
	i:=0;
	OPEN CUR_EMP;
	LOOP
		FETCH CUR_EMP INTO VENOJ,VENAME,VSAL;
		EXIT WHEN CUR_EMP%NOTFOUND;
		I:= I+1;
		DBMS_OUTPUT.PUT_LINE(VENO||''||VENAME||''||VSAL);
		INSERT INTO EMP_BACKUP VALUES (VENO,VENAME,VSAL);
	END LOOP;
	
	IF CUR_EMP%ROWCOUNT=0 THEN
		CLOSE CUR_EMP;
		RAISE NO_DEPT_FOUND;
	END IF;
		DBMS_OUTPUT.PUT_LINE('TOTAL NO OF RECORD INSERTED INTO EMP_BACKUP TABLE ARE:-'||);
		CLOSE CUR_EMP;
EXCEPTION 
	WHEN NO_DEPT_FOUND
		DBMS_OUTPUT.PUT_LINE('NO RECORD ARE FOUND FOR GIVEN DEPT NO');
	WHEN OTHERS THEN
	DBMS_OUTPUT.PUT_LINE('PL/SQL CODE ENCOUNTERED AN ERROR');
END;
/
	
	
		